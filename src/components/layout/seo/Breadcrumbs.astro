---
import HeaderLink from '../layout/HeaderLink.astro';
import { BASE_URL } from '../../consts';

interface Props {
	path: string;
}

const { path } = Astro.props;

const cleanPath = path.startsWith(BASE_URL)
? path.substring(BASE_URL.length)
: path;

const segments = cleanPath.split('/').filter(segment => segment !== '');

let currentPath = '';
const breadcrumbs = segments.map((segment, index) => {
	currentPath += `/${segment}`;
	const isLast = index === segments.length - 1;
	return {
		href: currentPath,
		label: segment.charAt(0).toUpperCase() + segment.slice(1),
		isLast: isLast
	};
});
---
<nav class="py-4 bg-guide-light dark:bg-cosmic-void text-sm" aria-label="Breadcrumb">
	<ol class="flex list-none m-0 p-0 flex-wrap justify-center max-w-7xl mx-auto px-4">
		<li class="flex items-center">
			<HeaderLink href="/" class="text-sm">Inicio</HeaderLink>
		</li>
		{breadcrumbs.map((crumb) => (
			<li class="flex items-center">
				<span aria-hidden="true" class="mx-2">/</span>
				{crumb.isLast ? (
					<span aria-current="page" class="text-nitrogen-red font-semibold">{crumb.label}</span>
				) : (
					<HeaderLink href={crumb.href} class="text-sm">{crumb.label}</HeaderLink>
				)}
			</li>
		))}
	</ol>
</nav>