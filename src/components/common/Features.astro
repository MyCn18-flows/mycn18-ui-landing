---
import { type FeaturesConfig } from '@/types/features-config';
import { iconMap } from '@/utils/icon-map';
import Carousel from '@/components/islands/Carousel';

type Props = {
  featuresConfig: FeaturesConfig;
}

const { featuresConfig } = Astro.props;

const carouselItems = featuresConfig.items.map(f => ({
  ...f,
  iconName: iconMap[f.icon]
}));
---

<section id="features" class="relative bg-app text-main px-4 py-20 sm:px-6 lg:px-8 border-y border-main">
  <div class="border-main/20 absolute top-8 left-8 h-16 w-16 border-t-2 border-l-2"></div>
  <div class="border-main/20 absolute top-8 right-8 h-16 w-16 border-t-2 border-r-2"></div>

  <div class="mx-auto max-w-7xl">
    <div class="scroll-fade-up mx-auto mb-16 max-w-3xl text-center">
      <h2 class="text-main mb-4 text-4xl font-bold sm:text-5xl">{featuresConfig.title}</h2>
      <p class="opacity-70 text-xl">{featuresConfig.subtitle}</p>
    </div>

    <Carousel client:visible items={carouselItems} />
  </div>
</section>